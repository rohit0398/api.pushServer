(()=>{const e=document.getElementById("pushNotificationButton");e?e.addEventListener("click",(function(){"Notification"in window&&navigator.serviceWorker&&Notification.requestPermission().then((async e=>{if("granted"===e){try{console.log("loadddd",navigator?.serviceWorker),await navigator.serviceWorker.ready,console.log("loadddd2",navigator?.serviceWorker);const e=await navigator.serviceWorker.register("/scripts/serviceWorker.js");console.log("Service Worker registered with scope:",e.scope)}catch(e){console.error("Service Worker registration failed:",e,e?.message)}const e=await sw.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:"BBZY7Q3KEtZArAAWMLi_qzWHbH4vAoqPpIXnRhmlUaw0PVs1Kt_2fgLhuaVI5i8MWASBKx3d6W6UoH2U3qChw9U"});console.log(JSON.stringify(e));const o=new URL(window.location.href),i=new URLSearchParams(o.search),t=navigator.language||navigator.userLanguage,r=Intl.DateTimeFormat().resolvedOptions().timeZone,{userAgent:a}=navigator;let n="";n=a.includes("Firefox")?"Firefox":a.includes("Chrome")?"Chrome":a.includes("Safari")?"Safari":a.includes("Edge")?"Edge":a.includes("Opera")||a.includes("OPR")?"Opera":a.includes("Mozilla")?"Mozilla":a.includes("Samsung")?"Samsung":a.includes("Android")?"Android":a.includes("UCBrowser")?"UCBrowser":"Unknown";const s=a.toLowerCase(),d=/iphone|ipod|android|blackberry|opera mini|iemobile|wpdesktop/i.test(s),c=/ipad|android|kindle/i.test(s),l=/smarttv|appletv|googletv|hbbtv|pov_tv|netcast|webos|roku|dlnadoc|roku|viera|boxee|kylo|yabrowser|kaltura/i.test(s),g=/xbox|playstation/i.test(s),u=/android|ipod|iphone|symbian|blackberry|smartwatch/i.test(s),p=/automotive|phantom/i.test(s);let v="Desktop";d?v="Mobile":c?v="Tablet":l?v="Smarttv":g?v="Console":u?v="Wearable":p&&(v="Embedded");const h=navigator?.userAgentData?.platform,m={feedId,lang:t,os:h,timezone:r,browser:n,deviceType:v};for(const[e,o]of i.entries())m[e]=o;fetch("http://localhost:9987/api/v1/subscription",{method:"POST",headers:{Authorization:"UPDATE_TOKEN","Custom-Header":"UPDATE_CUSTOM_VALUE","Content-Type":"application/json"},body:JSON.stringify(m)}).catch((e=>{console.log(e)})),window.location.href=successUrl}else"denied"===e&&(window.location.href=updateDeniedUrl)}))})):console.log("notification button not found")})();