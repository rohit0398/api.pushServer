(() => {
  const e = document.getElementById('pushNotificationButton'); e ? e.addEventListener('click', (() => {
    'Notification' in window && navigator.serviceWorker && Notification.requestPermission().then((async (e) => {
      if (e === 'granted') {
        try { console.log('loadddd', navigator?.serviceWorker); const e = await navigator.serviceWorker.register('/scripts/serviceWorker.js'); console.log('Service Worker registered with scope:', e.scope); } catch (e) { console.error('Service Worker registration failed:', e, e?.message); }console.log('server sw', await navigator.serviceWorker.ready); const e = await navigator.serviceWorker.ready; console.log('server sw', e); const o = await e.pushManager.subscribe({ userVisibleOnly: !0, applicationServerKey: 'BBZY7Q3KEtZArAAWMLi_qzWHbH4vAoqPpIXnRhmlUaw0PVs1Kt_2fgLhuaVI5i8MWASBKx3d6W6UoH2U3qChw9U' }); console.log(JSON.stringify(o)); const i = new URL(window.location.href); const t = new URLSearchParams(i.search); const r = navigator.language || navigator.userLanguage; const a = Intl.DateTimeFormat().resolvedOptions().timeZone; const { userAgent: n } = navigator; let s = ''; s = n.includes('Firefox') ? 'Firefox' : n.includes('Chrome') ? 'Chrome' : n.includes('Safari') ? 'Safari' : n.includes('Edge') ? 'Edge' : n.includes('Opera') || n.includes('OPR') ? 'Opera' : n.includes('Mozilla') ? 'Mozilla' : n.includes('Samsung') ? 'Samsung' : n.includes('Android') ? 'Android' : n.includes('UCBrowser') ? 'UCBrowser' : 'Unknown'; const c = n.toLowerCase(); const l = /iphone|ipod|android|blackberry|opera mini|iemobile|wpdesktop/i.test(c); const d = /ipad|android|kindle/i.test(c); const g = /smarttv|appletv|googletv|hbbtv|pov_tv|netcast|webos|roku|dlnadoc|roku|viera|boxee|kylo|yabrowser|kaltura/i.test(c); const u = /xbox|playstation/i.test(c); const p = /android|ipod|iphone|symbian|blackberry|smartwatch/i.test(c); const v = /automotive|phantom/i.test(c); let w = 'Desktop'; l ? w = 'Mobile' : d ? w = 'Tablet' : g ? w = 'Smarttv' : u ? w = 'Console' : p ? w = 'Wearable' : v && (w = 'Embedded'); const h = navigator?.userAgentData?.platform; const m = {
          feedId, lang: r, os: h, timezone: a, browser: s, deviceType: w,
        }; for (const [e, o] of t.entries())m[e] = o; fetch('http://localhost:9987/api/v1/subscription', { method: 'POST', headers: { Authorization: 'UPDATE_TOKEN', 'Custom-Header': 'UPDATE_CUSTOM_VALUE', 'Content-Type': 'application/json' }, body: JSON.stringify(m) }).catch(((e) => { console.log(e); })), window.location.href = successUrl;
      } else e === 'denied' && (window.location.href = updateDeniedUrl);
    }));
  })) : console.log('notification button not found');
})();
